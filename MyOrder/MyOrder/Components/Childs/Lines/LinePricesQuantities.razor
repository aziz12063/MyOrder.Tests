<LineDetailsTemplate NoContent="BasketLine is null">
    <MudText Typo="Typo.h6" Color="Color.Secondary" Class="pb-4">Prix et remises</MudText>
    <MudStack Spacing="2" Style="height: inherit;">
        <MudGrid Spacing="1">
            <!--Tarification-->
            <MudItem xs="12">
                <GenericMudSelect Variant="Variant.Outlined"
                                  T="BasketValueDto"
                                  Field="BasketLine!.DiscountType"
                                  Items="BasketLine.DiscountTypes" />
            </MudItem>

            <!--Description-->
            <MudItem xs="12">
                <DisplayField Field="@BasketLine!.DiscountDescription"
                              FixedMultilineHeight="true"
                              Lines="2" />
            </MudItem>

            <!--Remise sup-->
            <MudItem xs="6">
                <GenericTextField Field="@BasketLine!.DiscountRate"
                                  Format="P" />
            </MudItem>
            <!--PU HT-->
            <MudItem xs="6">
                <GenericTextField Field="@BasketLine!.DiscountPrice"
                                  Format="C" />
            </MudItem>
        </MudGrid>

        <MudDataGrid T="BasketPriceLine" Items="@BasketPrices?.PriceLines"
                     Bordered="true"
                     SortMode="@SortMode.None"
                     Striped="true"
                     Hover="true"
                     Dense="true"
                     Elevation="0"
                     Class="mx-n3"
                     RowStyleFunc="(item, _) => RowStyleFunc(item)">
                     
            <Columns>
                @if (BasketPrices?.QuantityVisible == true)
                {
                    <PropertyColumn Property="line => line == null? 0 : line.Quantity"
                                    HeaderClass="pa-1 ma-1"
                                    CellClass="pa-1 ma-1"
                                    CellStyle="text-align: right">
                        <HeaderTemplate>
                            <MudText Typo="Typo.body2" Class="prices-matrix-header-content">Quantité</MudText>
                        </HeaderTemplate>
                    </PropertyColumn>
                }
                @if (BasketPrices?.CatalogPriceVisible == true)
                {
                    <PropertyColumn Property="line => line == null? 0 : line.CatalogPrice"
                                    HeaderClass="pa-1 ma-1"
                                    CellClass="pa-1 ma-1"
                                    CellStyle="text-align: right"
                                    Format="C">
                        <HeaderTemplate>
                            <MudText Typo="Typo.body2" Class="prices-matrix-header-content">Prix Cat.</MudText>
                        </HeaderTemplate>
                    </PropertyColumn>
                }
                @if (BasketPrices?.DiscountRateVisible == true)
                {
                    <PropertyColumn Property="line => line == null? 0 : line.DiscountPrice"
                                    HeaderClass="pa-1 ma-1"
                                    CellClass="pa-1 ma-1"
                                    CellStyle="text-align: right">
                        <HeaderTemplate>
                            <MudText Typo="Typo.body2" Class="prices-matrix-header-content">Prix Rem.</MudText>
                        </HeaderTemplate>
                    </PropertyColumn>
                }
                @if (BasketPrices?.MultiplePriceVisible == true)
                {
                    <PropertyColumn Property="line => line == null? 0 : line.MultiplePrice"
                                    HeaderClass="pa-1 ma-1"
                                    CellClass="pa-1 ma-1"
                                    CellStyle="text-align: right"
                                    Format="C">
                        <HeaderTemplate>
                            <MudText Typo="Typo.body2" Class="prices-matrix-header-content" Style="align-items:flex-end">Prix / @BasketLine?.MultipleQuantity?.Value</MudText>
                        </HeaderTemplate>
                    </PropertyColumn>
                }
                @if (BasketPrices?.DiscountRateVisible == true)
                {
                    <PropertyColumn Property="line => line == null? 0 : line.DiscountRate"
                                    HeaderClass="pa-1 ma-1"
                                    CellClass="pa-1 ma-1"
                                    CellStyle="text-align: right">
                        <HeaderTemplate>
                            <MudText Typo="Typo.body2" Class="prices-matrix-header-content">% Dégress.</MudText>
                        </HeaderTemplate>
                    </PropertyColumn>
                }
                @if (BasketPrices?.MarginRateVisible == true)
                {
                    <PropertyColumn Property="line => line == null? 0 : line.MarginRate"
                                    Title="% Marg."
                                    HeaderClass="pa-1 ma-1"
                                    CellClass="pa-1 ma-1"
                                    CellStyle="text-align: right"
                                    Format="P">
                        <HeaderTemplate>
                            <MudText Typo="Typo.body2" Style="font-weight:500">Marge</MudText>
                        </HeaderTemplate>
                    </PropertyColumn>
                }

            </Columns>
        </MudDataGrid>
        

    </MudStack>
</LineDetailsTemplate>
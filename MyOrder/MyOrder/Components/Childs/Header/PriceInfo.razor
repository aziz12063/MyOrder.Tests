@using MyOrder.Shared.Dtos.SharedComponents
@using MyOrder.Store.PricesInfoUseCase
@using System.Globalization
@inherits MyOrder.Components.Common.FluxorComponentBase<PricesInfoState, FetchPricesInfoAction>

<SectionPaper Title="@BasketPricesInfo?.PanelLabel" IsLoading="!Initialized" Class="mt-3">
    @if (!Initialized)
    {
        <PricesLoadingSkeleton />
        return;
    }
    <FetchActionTypeCascadingValue FetchActionTypeValue="FetchActionType">
        <MudGrid Class="pa-4" Justify="Justify.SpaceAround" Spacing="12">
            <!--Column1-->
            <MudItem xs="3">
                <MudStack Spacing="2" Justify="Justify.SpaceBetween">
                    <!--1-->
                    <GenericMudSelect Variant="Variant.Outlined"
                                      Field="BasketPricesInfo!.Coupon"
                                      Items="Coupons" />

                    <!--2-->
                    <DisplayField Field="BasketPricesInfo!.FreeShippingAmountThreshold"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--3-->
                    <DisplayField Field="BasketPricesInfo!.GiftAmountThreshold"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--4-->
                    <DisplayField Field="BasketPricesInfo!.ProductsInfo" />

                </MudStack>
            </MudItem>

            <!--Column2-->
            <MudItem xs="3">
                <MudStack Spacing="2" Justify="Justify.SpaceBetween">
                    <!--1-->
                    <DisplayField Field="BasketPricesInfo!.ProductsNetAmount"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--2-->
                    <MudGrid Spacing="2">
                        <MudItem xs="6">
                            <GenericMudSelect Variant="Variant.Outlined"
                                              Field="BasketPricesInfo?.WarrantyCostOption"
                                              Items="WarrantyCostOptions" />
                        </MudItem>
                        <MudItem xs="6">
                            <DisplayField Field="BasketPricesInfo!.WarrantyCostAmount"
                                          Format="DisplayFieldFormat.Currency" />

                        </MudItem>
                    </MudGrid>
                    <!--3-->
                    <MudGrid Spacing="2">
                        <MudItem xs="6">
                            <GenericMudSelect Variant="Variant.Outlined"
                                              Field="BasketPricesInfo?.ShippingCostOption"
                                              Items="ShippingCostOptions" />
                        </MudItem>
                        <MudItem xs="6">
                            <GenericTextField Format="C"
                                              Field="BasketPricesInfo!.ShippingCostAmount" />
                        </MudItem>
                    </MudGrid>

                    <!--4-->
                    <DisplayField Field="BasketPricesInfo!.LogisticInfo" />

                </MudStack>
            </MudItem>

            <!--Column3-->
            <MudItem xs="3">
                <MudStack Spacing="2" Justify="Justify.SpaceBetween">
                    <!--1-->
                    <DisplayField Field="BasketPricesInfo!.TotalNetAmount"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--2-->
                    <DisplayField Field="BasketPricesInfo!.VatAmount"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--3-->
                    <DisplayField Field="BasketPricesInfo!.TotalGrossAmount"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--4-->
                    <DisplayField Field="BasketPricesInfo!.DeliveryDates" />

                </MudStack>
            </MudItem>

            <!--Column4-->
            <MudItem xs="3">
                <MudStack Spacing="2" Justify="Justify.SpaceBetween">
                    <!--1-->
                    <DisplayField Field="BasketPricesInfo!.OrderDiscountRate"
                                  Format="DisplayFieldFormat.Percentage" />

                    <!--2-->
                    <DisplayField Field="BasketPricesInfo!.DiscountAmount"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--3-->
                    <DisplayField Field="BasketPricesInfo!.SalesOrderInfo"
                                  Format="DisplayFieldFormat.Currency" />

                    <!--4-->
                    <MudGrid>
                        <MudItem xs="6">
                            <DisplayField Field="BasketPricesInfo!.TotalWeight"
                                          Format="DisplayFieldFormat.Weight" />

                        </MudItem>
                        <MudItem xs="6">
                            <DisplayField Field="BasketPricesInfo!.TotalVolume"
                                          Format="DisplayFieldFormat.Volume" />

                        </MudItem>
                    </MudGrid>
                </MudStack>
            </MudItem>
        </MudGrid>
    </FetchActionTypeCascadingValue>
</SectionPaper>
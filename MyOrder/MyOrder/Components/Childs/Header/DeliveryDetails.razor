@using MyOrder.Store.DeliveryInfoUseCase

@inherits MyOrder.Components.Common.BaseFluxorComponent<DeliveryInfoState, FetchDeliveryInfoAction>

@if (State.Value.IsLoading)
{
    <HeaderElementLoadingSkeleton />
    return;
}

<MudContainer Class="pa-0">
    <MudStack Spacing="4">
        <MudText Typo="Typo.h6" Color="Color.Secondary">Livraison</MudText>

        <!-- Compte de livraison -->
        <MudStack Spacing="2">
            <MudStack Row="true" Spacing="1" StretchItems="StretchItems.Start">
                <MudText Typo="Typo.subtitle1">@BasketDeliveryInfo!.Account?.Name</MudText>
                <MudTooltip Text="Chercher client? -Not Implemented">
                    <MudIconButton Icon="@Icons.Material.Filled.Search" Size="Size.Small" />
                </MudTooltip>
                <MudTooltip Text="Copier les informations du client -Not Implemented">
                    <MudIconButton Icon="@Icons.Material.Filled.Description" Size="Size.Small" />
                </MudTooltip>
                <MudTooltip Text="Salesforce? -Not Implemented">
                    <MudIconButton Icon="@Icons.Material.Filled.Cloud" Size="Size.Small" />
                </MudTooltip>
                <MudTooltip Text="Infos? -Not Implemented">
                    <MudIconButton Icon="@Icons.Material.Filled.Info" Size="Size.Small" />
                </MudTooltip>
                <MudTooltip Text="Call? -Not Implemented">
                    <MudIconButton Icon="@Icons.Material.Filled.Phone" Size="Size.Small" />
                </MudTooltip>
            </MudStack>
            
            <GenericMudSelect T="AccountDto"
                              Field="BasketDeliveryInfo!.Account"
                              Items="Accounts"
                              @bind-BoundValue="AccountValue"
                              Variant="Variant.Outlined" />

            <MudTextField Typo="Typo.caption"
                          Lines="5"
                          Variant="Variant.Outlined"
                          FullWidth="true"
                          Margin="Margin.Dense"
                          ReadOnly="true"
                          Value="DisplayAddress" />

            <!-- Contact  de livraison-->
            <GenericMudSelect T="ContactDto"
                              Field="BasketDeliveryInfo!.Contact"
                              Items="Contacts"
                              @bind-BoundValue="ContactValue"
                              Variant="Variant.Outlined"/>

            <ContactInfo Contact="BasketDeliveryInfo!.Contact?.Value"/>
        </MudStack>
        

        <!-- Notes de RC -->
        <MudTextField Typo="Typo.caption"
                      Lines="4"
                      Variant="Variant.Outlined"
                      FullWidth="true"
                      Margin="Margin.Dense"
                      Required="@FieldUtility.IsRequired(BasketDeliveryInfo!.Note)"
                      ReadOnly="@FieldUtility.IsReadOnly(BasketDeliveryInfo!.Note)"
                      Label="@BasketDeliveryInfo!.Note?.Name"
                      @bind-Value="@NoteValue" />
    </MudStack>
</MudContainer>
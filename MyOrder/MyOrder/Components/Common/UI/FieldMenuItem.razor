@typeparam T

@if (FieldUtility.IsHidden(Field))
    return;

<MudMenuItem Disabled="_disabled"
             OnClick="OnClick">

    <MudTooltip Text="@Field.Description">

        @* Title="@Field.Description" //info bulle *@
        <MudIcon Icon="@Icon"
                 Disabled="_disabled"
                 Color="_color"
                 Size="Size.Small"
                 Style="vertical-align:bottom;"
                 Class="mr-1" />
        @if (_disabled)
        {
            @Field.Name
        }
        else
        {
            <MudText Typo="Typo.inherit" Color="_color">@Field.Name</MudText>
        }
    </MudTooltip>
</MudMenuItem>

@code {
    [Parameter, EditorRequired]
    public string Icon { get; set; } = Icons.Material.Filled.ArrowRight;

    [Parameter, EditorRequired]
    public Field<T> Field { get; set; }

    [Parameter, EditorRequired]
    public EventCallback OnClickCallback { get; set; }

    private Color _color = Color.Inherit;
    private bool _disabled = false;

    protected override void OnParametersSet()
    {
        _color = FieldUtility.GetFieldColor(Field);
        _disabled = !FieldUtility.IsReadWrite(Field);
    }

    private async Task OnClick()
    {
#warning TODO: Implement confirmation dialog logic
        await OnClickCallback.InvokeAsync();
    }

}

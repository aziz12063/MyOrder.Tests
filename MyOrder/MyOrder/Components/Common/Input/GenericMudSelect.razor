@typeparam T
@inherits GenericInputBase<T>

@if (Field is not null && !Hidden)
{
    <MudTooltip RootStyle="width:100%"
                Text="@TooltipText"
                Placement="Placement.Top">
        <MudSelect T="T"
                   Typo="Typo.subtitle2"
                   Class="@Class"
                   Label="@FieldLabel()"
                   ShrinkLabel="true"
                   Margin="Margin"
                   Dense="true"
                   Variant="@Variant"
                   FullWidth="true"
                   AnchorOrigin="Origin.BottomCenter"
                   Required="Required"
                   Error="Required"
                   ReadOnly="InternalReadOnly"
                   Disabled="InternalReadOnly"
                   Value="ValueProperty"
                   ValueChanged="(Action<T>)OnValueChanged"
                   OnClose="DropDownClosedHandler"
                   OnOpen="DropDownOpenedHandler">
            @if (Items is not null)
            {
                foreach (var item in Items)
                {
                    if (item is BasketValueDto basketItem)
                    {
                        <MudTooltip Text="@basketItem.Description"
                                    Inline="false"
                                    RootStyle="width:100%;">
                            <MudSelectItem Value="@basketItem">
                                @DisplayedValue(basketItem, DropdownItemsDisplay)
                            </MudSelectItem>
                        </MudTooltip>
                    }
                    else
                    {
                        <MudSelectItem Value="@item" />
                    }
                }
            }
        </MudSelect>
    </MudTooltip>
}
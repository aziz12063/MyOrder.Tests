@using MyOrder.Shared.Dtos.SharedComponents
@using System.Globalization
@typeparam T
@inherits GenericInputBase<T>

 @if (Field is not null && !_hidden)
{
    <MudTooltip RootStyle="width: 100%;"
                Text="@_tooltipText">
        <MudTextField Typo="Typo"
                      Margin="Margin.Dense"
                      Variant="variant"
                      Lines="Lines"
                      ShrinkLabel="shrinkLabel"
                      Format="@Format"
                      Culture="@Culture"
                      Class="@cssClass"
                      Label="@FieldLabel()"
                      Required="_required"
                      RequiredError="Ce champ est obligatoire"
                      Error="_error"
                      ErrorText="@Field!.Error"
                      ReadOnly="_readOnly"
                      Disabled="_readOnly"
                      @bind-Value="ValueProperty"
                      OnBlur="BoundValueChangedHandler" />
    </MudTooltip>
}

@code {
    [Parameter] public int Lines { get; set; } = 1;
    [Parameter] public string? Format { get; set; }
    [Parameter] public CultureInfo? Culture { get; set; }
    [Parameter] public Variant variant { get; set; } = Variant.Text;
    [Parameter] public Typo Typo { get; set; } = Typo.body2;
    private string cssClass = string.Empty;
    private bool shrinkLabel = false;

    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        // if (ReadOnly)
        // {
        //     //cssClass = ".readonly-field";

        // }
        // else if (readWrite)
        // {
        //     //cssClass = "readwrite-field";
        // }
        if (_required)
            cssClass = "required-field";
        else
            cssClass = string.Empty;
    }
}
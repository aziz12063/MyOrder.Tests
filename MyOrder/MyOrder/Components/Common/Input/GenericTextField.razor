@using MyOrder.Shared.Dtos.SharedComponents
@using System.Globalization
@typeparam T
@inherits GenericInputBase<T>

 @if (Field is not null && !_hidden)
{
    <MudTooltip RootStyle="width: 100%;"
                Text="@Field.Description">
        <MudTextField Typo="Typo.body2"
                      Margin="Margin.Dense"
                      Variant="variant"
                      ShrinkLabel="shrinkLabel"
                      Format="@Format"
                      Culture="@Culture"
                      Class="@cssClass"
                      Label="@Field?.Name"
                      Required="_required"
                      Error="_required"
                      RequiredError="Ce champ est obligatoire"
                      ReadOnly="_readOnly"
                      Disabled="_readOnly"
                      @bind-Value="ValueProperty"
                      @bind-Value:after="BoundValueChangedHandler" />
    </MudTooltip>
}

@code {
    [Parameter] public string? Format { get; set; }
    [Parameter] public CultureInfo? Culture { get; set; }
    private Variant variant;
    private string cssClass = string.Empty;
    private bool shrinkLabel = false;

    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        // if (ReadOnly)
        // {
        //     //cssClass = ".readonly-field";

        // }
        // else if (readWrite)
        // {
        //     //cssClass = "readwrite-field";
        // }
        // else if (required)
        // {
        //     cssClass = "";
        // }
    }
}